{"ast":null,"code":"var _jsxFileName = \"C:\\\\work\\\\projects\\\\mts-time-tracker-frontend\\\\client\\\\src\\\\pages\\\\ResetPassword.jsx\",\n  _s = $RefreshSig$();\nimport { Box, Button, TextField } from '@mui/material';\nimport React, { useState } from 'react';\nimport Sidenav from '../component/Sidenav';\nimport Navbar from '../component/Navbar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ResetPassword() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const handleChange = event => {\n    setEmail(event.target.value);\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await fetch('http://localhost:8000/api/password-reset', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email\n        })\n      });\n      if (response.ok) {\n        alert('Password reset link sent to your email account.');\n        window.location.reload();\n        console.log(response.ok);\n      } else {\n        alert('Failed to send password reset link.');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  };\n  const handlePasswordSubmit = async event => {\n    event.preventDefault();\n    try {\n      const token = window.location.pathname.split('/').pop();\n      console.log('token.', token);\n      const response = await fetch(`http://localhost:8000/api/password-reset/${token}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          password\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        alert('Password reset successfully.');\n        window.location.reload();\n      } else {\n        alert(data || 'Failed to reset password.');\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred. Please try again later.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      height: 30\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Sidenav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"main\",\n        sx: {\n          flexGrow: 1,\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"ResetPassword\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Old Password\",\n            variant: \"outlined\",\n            value: email,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"New Password\",\n            variant: \"outlined\",\n            value: email,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Confirm Password\",\n            variant: \"outlined\",\n            value: email,\n            onChange: handleChange,\n            fullWidth: true,\n            margin: \"normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handlePasswordSubmit,\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            type: \"password\",\n            label: \"New Password\",\n            variant: \"outlined\",\n            value: password,\n            onChange: event => setPassword(event.target.value),\n            fullWidth: true,\n            margin: \"normal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            variant: \"contained\",\n            color: \"primary\",\n            children: \"Reset Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n}\n_s(ResetPassword, \"TSZhDBNy8CmbxXgprY/vvMmTG1Q=\");\n_c = ResetPassword;\nexport default ResetPassword;\nvar _c;\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"names":["Box","Button","TextField","React","useState","Sidenav","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","ResetPassword","_s","email","setEmail","password","setPassword","handleChange","event","target","value","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","alert","window","location","reload","console","log","error","handlePasswordSubmit","token","pathname","split","pop","data","json","children","fileName","_jsxFileName","lineNumber","columnNumber","height","sx","display","component","flexGrow","p","onSubmit","label","variant","onChange","fullWidth","margin","type","color","_c","$RefreshReg$"],"sources":["C:/work/projects/mts-time-tracker-frontend/client/src/pages/ResetPassword.jsx"],"sourcesContent":["import { Box, Button, TextField } from '@mui/material'\r\nimport React, { useState } from 'react'\r\nimport Sidenav from '../component/Sidenav'\r\nimport Navbar from '../component/Navbar'\r\n\r\nfunction ResetPassword() {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    \r\n    const handleChange = (event) => {\r\n        setEmail(event.target.value);\r\n      };\r\n\r\n      const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n          const response = await fetch('http://localhost:8000/api/password-reset', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email }),\r\n          });\r\n          if (response.ok) {\r\n            alert('Password reset link sent to your email account.');\r\n            window.location.reload()\r\n            console.log(response.ok)\r\n          } else {\r\n            alert('Failed to send password reset link.');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error:', error);\r\n         \r\n        }\r\n      };\r\n      const handlePasswordSubmit = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n          const token = window.location.pathname.split('/').pop(); \r\n          console.log('token.',token)\r\n          const response = await fetch(`http://localhost:8000/api/password-reset/${token}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ password }),\r\n          });\r\n          const data = await response.json();\r\n          if (response.ok) {\r\n            alert('Password reset successfully.');\r\n           \r\n            window.location.reload();\r\n          } else {\r\n            alert(data || 'Failed to reset password.');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error:', error);\r\n          alert('An error occurred. Please try again later.');\r\n        }\r\n      };\r\n    \r\n  return (\r\n    <>\r\n    <Navbar/>\r\n    <Box height={30}/>\r\n    <Box sx={{display:'flex'}}>\r\n      <Sidenav/>\r\n     \r\n      <Box component=\"main\" sx={{ flexGrow: 1, p: 3 }}>\r\n      <h1>ResetPassword</h1>\r\n      <form onSubmit={handleSubmit}>\r\n            <TextField\r\n              label=\"Old Password\"\r\n              variant=\"outlined\"\r\n              value={email}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n            />\r\n              <TextField\r\n              label=\"New Password\"\r\n              variant=\"outlined\"\r\n              value={email}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n            />\r\n              <TextField\r\n              label=\"Confirm Password\"\r\n              variant=\"outlined\"\r\n              value={email}\r\n              onChange={handleChange}\r\n              fullWidth\r\n              margin=\"normal\"\r\n            />\r\n            <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n              Submit\r\n            </Button>\r\n\r\n            \r\n          </form>\r\n\r\n          <form onSubmit={handlePasswordSubmit}>\r\n        <TextField\r\n          type=\"password\"\r\n          label=\"New Password\"\r\n          variant=\"outlined\"\r\n          value={password}\r\n          onChange={(event) => setPassword(event.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n          Reset Password\r\n        </Button>\r\n       \r\n      </form>\r\n      </Box>\r\n    </Box></>\r\n  )\r\n}\r\n\r\nexport default ResetPassword"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}